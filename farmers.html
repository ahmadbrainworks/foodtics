<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="dashboard/assets/img/apple-icon.png">
    <link rel="icon" type="image/png" href="dashboard/assets/img/favicon.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Foodtics</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport'
    />
    <!--     Fonts and icons     -->
    <!-- <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" /> -->
    <!-- <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet"> -->

    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN"
        crossorigin="anonymous">
    <!-- CSS Files -->
    <link href="dashboard/css/bootstrap.min.css" rel="stylesheet" />
    <link href="dashboard/css/now-ui-dashboard.css?v=1.0.1" rel="stylesheet" />
    <!-- <link href="assets/css/custom.css" rel="stylesheet" /> -->

    <link href="assets/img/my-icon.png" rel="shortcut icon">
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#0e7935">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#0e7935">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-status-bar-style" content="#0e7935">

    <!-- <script>
        document.getElementById('spinner').style.display = "none";
    </script> -->

    <link href="dashboard/demo/demo.css" rel="stylesheet" />
    <link href="dashboard/custom.css" rel="stylesheet" />
    <script src="dashboard/js/core/jquery.min.js "></script>

    <script>
        $(function () {
            $("#sidebar-component").load("sidebar-component.html");
        });
    </script>

</head>

<body class="">

    <div class="wrapper ">
        <div id="sidebar-component"></div>
        <div class="main-panel ">
            <div class="topy-bar text-right">
                <div class="navbar navbar-n">
                    <div class="navbar-wrapper " style="display: block; width: 100%;">
                        <div class="navbar-toggle ">
                            <button type="button " class="navbar-toggler " style=" float: left;">
                                <span class="navbar-toggler-bar bar1 "></span>
                                <span class="navbar-toggler-bar bar2 "></span>
                                <span class="navbar-toggler-bar bar3 "></span>
                            </button>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                            </div>
                            <div class="col-md-6">
                                <div class="float-right">
                                    <i class="now-ui-icons users_single-02 ">
                                    </i>
                                    Hello, Adeniran Opeyemi

                                </div>
                            </div>
                        </div>

                    </div>

                </div>
            </div>



            <div class="content " style="margin-top: 17px;">
                <div class="row">
                    <div class="col-md-12">
                        <div class="card card-stats">
                            <div class="card-body">
                                <h4 style="display: inline;">Farmers | Farm</h4>
                                <hr>
                                <h6>Search By:</h6>
                                <div class="row">
                                    <div class="col-md-5">
                                        <div class="form-group label-floating" style="margin-top: 8px;">
                                            <select class="form-control sign-input" name="" onchange="warningaa(this);">
                                                <div class="form-group label-floating" style="margin-top: 8px;"></div>

                                                <!-- <option selected>Select Food Crop</option> -->
                                                <option>All Products</option>
                                                <option>Cereals</option>
                                                <option value="leg">Legumes</option>
                                                <option>Tubers</option>
                                                <option>Vegetables</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-5">
                                        <div class="form-group label-floating">
                                            <div class="form-group label-floating" style="margin-top: 8px;">
                                                <select class="form-control sign-input" name="" disabled>
                                                    <!-- <option selected>Select Location</option> -->
                                                    <option selected>Lagos</option>
                                                    <!-- <option>Ogun</option>
                                                    <option>Abuja</option> -->
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="form-group label-floating">
                                            <div class="form-group label-floating">
                                                <input name="" id="" class="btn bg-green text-white btn-block" type="button" value="Search">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <hr>
                                <!-- <a href="order-driver.html" class=" pull-right btn">Make new Request</a> -->
                                <div class="spinner" id="spinner">
                                    <div class="bounce1"></div>
                                    <div class="bounce2"></div>
                                    <div class="bounce3"></div>
                                </div>
                                <div class="table-responsive" id="farmers">

                                    <h6 style="display: inline-block;">Search Result</h6>
                                    <span class="pull-right">Total: 20</span>

                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead class="">

                                                <tr>
                                                    <th>
                                                        Name
                                                    </th>
                                                    <th>
                                                        Address

                                                    </th>

                                                    <th>

                                                        Distance Away

                                                    </th>
                                                    <th>

                                                        Action

                                                    </th>


                                                </tr>
                                            </thead>
                                            <tbody id="tablee">

                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <footer class=" footer ">
                    <div class="container-fluid ">
                        <nav>
                            <ul>
                                <li>
                                    <a href="index.html ">
                                        Foodtics
                                    </a>
                                </li>
                                <li>
                                    <a href="# ">
                                        About Us
                                    </a>
                                </li>
                            </ul>
                        </nav>
                        <div class="copyright ">
                            &copy;
                            <script>
                                document.write(new Date().getFullYear())
                            </script>
                            <a href="# " target="_blank ">Foodtics</a>. Coded by
                            <a href="# " target="_blank ">Exolve Team</a>.
                        </div>
                    </div>
                </footer>
            </div>
        </div>
</body>
<!--   Core JS Files   -->
<script src="dashboard/js/core/popper.min.js "></script>
<script src="dashboard/js/core/bootstrap.min.js "></script>
<script src="dashboard/js/plugins/perfect-scrollbar.jquery.min.js "></script>

<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE "></script>
<script src="dashboard/js/plugins/chartjs.min.js "></script>
<script src="dashboard/js/plugins/bootstrap-notify.js "></script>
<script src="dashboard/js/now-ui-dashboard.js?v=1.0.1 "></script>
<script src="dashboard/demo/demo.js "></script>
<script>
    $(".spinner").hide();

    document.getElementById("farmers").style.display = "none";
    const gothere = (url, lat, long, name) => {
        window.location = 'https://joshuachinemezu.github.io/foodtics/farmer-single.html?q=' + url + '&lat=' + lat +
            '&long=' + long + '&name=' + name;
    }

    function warningaa(obj) {
        // obj.value == "leg"
        if (obj != "") {
            $.ajax({
                url: "https://places.cit.api.here.com/places/v1/autosuggest%20?at=6.4433644,3.4467792999999998&q=farms%20&app_id=axXfI1j48srWNf4lrX6f&app_code=u_k-IvJxGiY0Kwgx0zxUuw",
                // http://foodtics.local/getUserinfo

                type: "GET",

                // data: {
                //     userHash: cat
                // },

                dataType: "JSON",

                cache: false,

                beforeSend: function () {
                    $("#farmers").hide();
                    $(".spinner").show();
                },

                success: function (jsonStr) {
                    $("#spinner").hide();

                    // $("#btn").show();
                    $("#farmers").slideDown();
                    console.log(jsonStr.results)
                    html = '';

                    for (var i = 0; i < jsonStr.results[i].title.length; i++) {
                        html += '<tr>';
                        html += '<td>' + jsonStr.results[i].title + '</td>';
                        html += '<td>' + jsonStr.results[i].vicinity + '</td>';
                        html += '<td>' + jsonStr.results[i].distance / 1000 + 'km</td>';
                        url = "'" + jsonStr.results[i].href + "'";
                        lat = "'" + jsonStr.results[i].position[0] + "'";
                        long = "'" + jsonStr.results[i].position[1] + "'";
                        name = "'" + jsonStr.results[i].title + "'";
                        html += '<td><button onclick=' + '"gothere(' + url + ',' + lat + ',' + long + ',' +
                            name + ')" class="btn bg-green text-white btn-sm"> View More</button></td>';
                        html += '</tr>';

                    }


                    $('#tablee').html(html);

                    if (jsonStr.status == "error") {
                        if (jsonStr.code == 0) {
                            toastr.warning("Sorry fields cannot be null");
                        } else {
                            toastr.error("Error in operation, Please try again");
                        }
                    }

                    if (jsonStr.status == "success") {
                        if (jsonStr.code == 1) {
                            // toastr.success("Welcome " + jsonStr.fullname);
                            var username = localStorage.getItem("user_name");
                            document.getElementById("fullname").innerHTML = username;

                            // window.location =
                            //     "https://joshuachinemezu.github.io/foodtics/analytics.html"
                        } else {
                            toastr.warning("Invalid login details, Please try again");
                        }
                    }

                    // $("#result").text(JSON.stringify(jsonStr));
                }
            });



            // document.getElementById("farmers").style.display = "block";
        }
    }
</script>

</html>